
<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <title>看我开发干货集中营App（二） ~ APP初始化 | 范TE剑</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="接着上一篇《看我开发干货集中营App（一）~ 开篇》，本篇将开始我们【干货精选】的编码之旅，分为4部分内容： 新建App，签名配置，混淆代码以及依赖开源库。">
<meta name="keywords" content="Android开发,干货集中营，看我开发干货集中营">
<meta property="og:type" content="article">
<meta property="og:title" content="看我开发干货集中营App（二） ~ APP初始化">
<meta property="og:url" content="http://hcw2175.github.io/2016/09/09/看我开发干货集中营App（二）-APP初始化/index.html">
<meta property="og:site_name" content="范TE剑">
<meta property="og:description" content="接着上一篇《看我开发干货集中营App（一）~ 开篇》，本篇将开始我们【干货精选】的编码之旅，分为4部分内容： 新建App，签名配置，混淆代码以及依赖开源库。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://oa5k1q7cb.bkt.clouddn.com/GankEssence/%E4%BA%8C/%E7%AD%BE%E5%90%8D%E9%85%8D%E7%BD%AE.PNG">
<meta property="og:image" content="http://oa5k1q7cb.bkt.clouddn.com/GankEssence/%E4%BA%8C/%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C.PNG">
<meta property="og:updated_time" content="2018-11-15T00:59:18.056Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="看我开发干货集中营App（二） ~ APP初始化">
<meta name="twitter:description" content="接着上一篇《看我开发干货集中营App（一）~ 开篇》，本篇将开始我们【干货精选】的编码之旅，分为4部分内容： 新建App，签名配置，混淆代码以及依赖开源库。">
<meta name="twitter:image" content="http://oa5k1q7cb.bkt.clouddn.com/GankEssence/%E4%BA%8C/%E7%AD%BE%E5%90%8D%E9%85%8D%E7%BD%AE.PNG">
  
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
  

</head>
</html>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <nav id="upper-nav" class="inner">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <div class="sub-nav">
        
        
      </div>
    </nav>
    <div id="header-title">
      
        <h1 id="blog-title-wrap">
          <a href="/" id="blog-title">范TE剑</a>
        </h1>
      
    </div>
    <div id="contenedor">
      <ul class="cube">
        <li class="cara">范TE剑</li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
        <li class="cara"></li>
      </ul>
    </div>
    <nav id="main-nav">
      
        <a class="main-nav-link" href="/">首页</a>
      
        <a class="main-nav-link" href="/archives">归档</a>
      
        <a class="main-nav-link" href="/about">关于</a>
      
      <a class="main-nav-link st-search-show-outputs">搜索</a>
    </nav>
  </div>
</header>

    <div class="outer">
      <section id="main"><article id="post-看我开发干货集中营App（二）-APP初始化" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <h3 href="/2016/09/09/看我开发干货集中营App（二）-APP初始化/" class="article-date">
  <time datetime="2016-09-09T12:39:21.000Z" itemprop="datePublished">2016-09-09</time>
</h3>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/看我开发干货集中营App/">看我开发干货集中营App</a>
  </div>

  </div>
  <div class="article-inner">
  <div class="curve-down">
  <div class="fill-content">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      看我开发干货集中营App（二） ~ APP初始化
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
        <p>接着上一篇<a href="http://www.huchiwei.com/2016/09/03/%E7%9C%8B%E6%88%91%E5%BC%80%E5%8F%91%E5%B9%B2%E8%B4%A7%E9%9B%86%E4%B8%AD%E8%90%A5App%EF%BC%88%E4%B8%80%EF%BC%89-%E5%BC%80%E7%AF%87/" target="_blank" rel="noopener">《看我开发干货集中营App（一）~ 开篇》</a>，本篇将开始我们【干货精选】的编码之旅，分为4部分内容： 新建App，签名配置，混淆代码以及依赖开源库。</p>
<a id="more"></a>
<h2 id="新建APP"><a href="#新建APP" class="headerlink" title="新建APP"></a>新建APP</h2><p>使用Android Studio 2.2 Rc版本新建名为<code>GankEssence</code>项目，建立过程按需填写相关包名即可。</p>
<p>新建成功后修改我们之前的已经设定好的颜色配置并更改APP中文名, 那么相关配置暂时如下：</p>
<p>color.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line">&lt;color name=&quot;colorPrimary&quot;&gt;#009688&lt;/color&gt;</span><br><span class="line">&lt;color name=&quot;colorPrimaryDark&quot;&gt;#00796B&lt;/color&gt;</span><br><span class="line">&lt;color name=&quot;colorAccent&quot;&gt;#8BC34A&lt;/color&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<p>strings.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;string name=&quot;app_name&quot;&gt;干货精选&lt;/string&gt;</span><br><span class="line">    &lt;string name=&quot;app_name_en&quot;&gt;GankEssence&lt;/string&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<p>sdk相关</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">compileSdkVersion 24</span><br><span class="line">buildToolsVersion &quot;24.0.2&quot;</span><br><span class="line">defaultConfig &#123;</span><br><span class="line">    applicationId &quot;com.huchiwei.gankessence&quot;</span><br><span class="line">    minSdkVersion 15</span><br><span class="line">    targetSdkVersion 24</span><br><span class="line">    versionCode 1</span><br><span class="line">    versionName &quot;1.0&quot;</span><br><span class="line">    testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其它暂时保持不变。模拟器运行即可看见<code>Hello World</code>，颜色也跟设定一样。</p>
<h2 id="签名配置"><a href="#签名配置" class="headerlink" title="签名配置"></a>签名配置</h2><p>虽然APP离真正发布还很远，按我个人习惯还是把APP必须的东西但基本不会怎么变动的先配置了。</p>
<p>AS上建立签名文件太Easy： <code>工具栏Build &gt; Generate Sign Apk &gt; create new</code>，然后填写签名相关信息即可。具体也可参考<a href="https://developer.android.com/studio/publish/app-signing.html" target="_blank" rel="noopener">官网说明</a>。</p>
<p>创建完后打开<code>Project Structure</code>(windows快捷键ctrl+alt+shift+s)，切换到app并填写填写签名信息如下图,, 填写完确定将签名信息写入到<code>app/build.grade</code>中：<br><img src="http://oa5k1q7cb.bkt.clouddn.com/GankEssence/%E4%BA%8C/%E7%AD%BE%E5%90%8D%E9%85%8D%E7%BD%AE.PNG" alt="签名配置"></p>
<p>配置签名后再看看我们的<code>app/build.grade</code>会发现多签名信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">    release &#123;</span><br><span class="line">        keyAlias &apos;huchiwei&apos;</span><br><span class="line">        keyPassword &apos;password123&apos;</span><br><span class="line">        storeFile file(&apos;E:/我的坚果云/Android开发/签名文件/android.hucw.signkey.jks&apos;)</span><br><span class="line">        storePassword &apos;password123&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">release &#123;</span><br><span class="line">    signingConfig signingConfigs.release</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时打开AS右侧Gradle面板执行下<code>assembleRelease</code>任务，如果正常的话，在app的build/outputs/apk能够见到已经签名的<code>app-release.apk</code>。</p>
<h2 id="开启混淆-压缩"><a href="#开启混淆-压缩" class="headerlink" title="开启混淆\压缩"></a>开启混淆\压缩</h2><p>app/build.gradle配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">release &#123;</span><br><span class="line">    minifyEnabled true          // 开启混淆</span><br><span class="line">    shrinkResources true        // 移除无用资源</span><br><span class="line">    zipAlignEnabled true        // 开启压缩</span><br><span class="line">    proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>proguard-android.txt</code> android默认混淆配置，以包含基本的混淆配置(不明白网上很多配置为什么要在proguard-rules.pro里面覆写其内容)，<code>proguard-rules.pro</code>app自定义混淆配置。</p>
<p>proguard-rules.pro配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">-optimizationpasses 5                                                           # 指定代码的压缩级别</span><br><span class="line">-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*        # 混淆时所采用的算法</span><br><span class="line"></span><br><span class="line"># 保持内部类</span><br><span class="line">-keepattributes InnerClasses,EnclosingMethod</span><br><span class="line">-dontoptimize</span><br><span class="line">-optimizations optimization_filter</span><br><span class="line"></span><br><span class="line">#如果有引用v4包可以添加下面这行</span><br><span class="line">-keep class android.support.v4.** &#123; *; &#125;</span><br><span class="line">-keep public class * extends android.support.v4.**</span><br><span class="line">-keep public class * extends android.app.Fragment</span><br><span class="line"></span><br><span class="line">#如果引用了v4或者v7包，可以忽略警告</span><br><span class="line">-dontwarn android.support.**</span><br><span class="line"></span><br><span class="line"># 保持哪些类不被混淆</span><br><span class="line">-keep public class * extends android.app.Activity</span><br><span class="line">-keep public class * extends android.app.Application</span><br><span class="line">-keep public class * extends android.app.Service</span><br><span class="line">-keep public class * extends android.content.BroadcastReceiver</span><br><span class="line">-keep public class * extends android.content.ContentProvider</span><br><span class="line">-keep public class * extends android.app.backup.BackupAgentHelper</span><br><span class="line">-keep public class * extends android.preference.Preference</span><br><span class="line">-keep public class com.android.vending.licensing.ILicensingService</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#保持自定义组件不被混淆</span><br><span class="line">-keep public class * extends android.view.View &#123;</span><br><span class="line">    public &lt;init&gt;(android.content.Context);</span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet);</span><br><span class="line">    public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);</span><br><span class="line">    public void set*(...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为暂时未依赖第三方库，所以混淆配置比较少，这样做有一个好处：越少依赖越早开启测试混淆，越不容易出现问题。即使出现问题也能很快定位问题，否则依赖N多包到准备发包时才开启混淆测试，那就有得哭了。而且尽管现在仅依赖了<code>appcompat-v7</code>的包，但发布打包测试依然一堆错误警告，虽然没有中断打包，却让人很不爽，直到看到<a href="http://stackoverflow.com/questions/35796144/progaurd-issue-warningignoring-innerclasses-attribute-for-an-anonymous-inner-c" target="_blank" rel="noopener">这里</a>，<a href="">还有这里</a>加入以下代码后才解决：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 保持内部类</span><br><span class="line">-keepattributes InnerClasses,EnclosingMethod</span><br><span class="line">-dontoptimize</span><br><span class="line">-optimizations optimization_filter</span><br></pre></td></tr></table></figure>
<p>ok，签名、混淆配置搞定。</p>
<h2 id="多渠道打包"><a href="#多渠道打包" class="headerlink" title="多渠道打包"></a>多渠道打包</h2><p>其实在这个刚开始阶段就配置这个多渠道打包，实在有点早。不过因为这个东西其实也不太难，而且考虑到本系列文章是由浅到深，所以就干脆提前来讲讲好了。</p>
<p>多渠道打包百度随便一搜，N多文章介绍，这里选几篇有代表性，大家可以看看：</p>
<ul>
<li><a href="http://stormzhang.com/devtools/2015/01/15/android-studio-tutorial6/" target="_blank" rel="noopener">ANDROID STUDIO系列教程六–GRADLE多渠道打包</a></li>
<li><a href="http://tech.meituan.com/mt-apk-packaging.html" target="_blank" rel="noopener">美团Android自动化之旅—生成渠道包</a></li>
<li><a href="http://gold.xitu.io/entry/577383c66be3ff006adc92a3" target="_blank" rel="noopener">手把手教你 AndroidStudio 多渠道打包</a></li>
</ul>
<p>同样地，我也到友盟申请个App统计应用，按照SDK文档配置下。</p>
<p><strong>manifest.xml</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta-data</span><br><span class="line">    android:name=&quot;UMENG_CHANNEL&quot;</span><br><span class="line">    android:value=&quot;$&#123;UMENG_CHANNEL_VALUE&#125;&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><strong>在app的build.gradle设置produceFlavors</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 友盟多渠道打包</span><br><span class="line">productFlavors &#123;</span><br><span class="line">    wandoujia &#123;&#125;</span><br><span class="line">    _360 &#123;&#125;</span><br><span class="line">    baidu &#123;&#125;</span><br><span class="line">    xiaomi &#123;&#125;</span><br><span class="line">    tencent &#123;&#125;</span><br><span class="line">    taobao &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">productFlavors.all &#123; flavor -&gt;</span><br><span class="line">    flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后格式化名称输出apk</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">def releaseTime() &#123;</span><br><span class="line">    return new Date().format(&quot;yyyy-MM-dd&quot;, TimeZone.getTimeZone(&quot;UTC&quot;))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        // dex突破65535的限制</span><br><span class="line">        multiDexEnabled true</span><br><span class="line">        // 默认是umeng的渠道</span><br><span class="line">        manifestPlaceholders = [UMENG_CHANNEL_VALUE: &quot;umeng&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            applicationVariants.all &#123; variant -&gt;</span><br><span class="line">                variant.outputs.each &#123; output -&gt;</span><br><span class="line">                    def outputFile = output.outputFile</span><br><span class="line">                    if (outputFile != null &amp;&amp; outputFile.name.endsWith(&apos;.apk&apos;)) &#123;</span><br><span class="line">                        // 输出apk名称为gankessence_v1.0_2015-01-15_wandoujia.apk</span><br><span class="line">                        def fileName = &quot;gankessence_v$&#123;defaultConfig.versionName&#125;_$&#123;releaseTime()&#125;_$&#123;variant.productFlavors[0].name&#125;.apk&quot;</span><br><span class="line">                        output.outputFile = new File(outputFile.parent, fileName)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后再一次执行<code>assembleRelease</code>，如果正常的话应该可以看到如下结果：<br><img src="http://oa5k1q7cb.bkt.clouddn.com/GankEssence/%E4%BA%8C/%E5%A4%9A%E6%B8%A0%E9%81%93%E6%89%93%E5%8C%85%E7%BB%93%E6%9E%9C.PNG" alt="多渠道打包"></p>
<h2 id="支持库、第三方库依赖"><a href="#支持库、第三方库依赖" class="headerlink" title="支持库、第三方库依赖"></a>支持库、第三方库依赖</h2><p>关于官方支持库的依赖版本，按照Google建议是使用最新版本，当然这个大家按照自己需求即可。</p>
<p>根据干货精选的原型设计图，基本可以看出来需要使用那些支持库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Android Support Libraries</span><br><span class="line">compile &apos;com.android.support:appcompat-v7:24.2.0&apos;</span><br><span class="line">compile &apos;com.android.support:cardview-v7:24.2.0&apos;</span><br><span class="line">compile &apos;com.android.support:design:24.2.0&apos;</span><br><span class="line">compile &apos;com.android.support:recyclerview-v7:24.2.0&apos;</span><br><span class="line">compile &apos;com.android.support:support-v4:24.2.0&apos;</span><br></pre></td></tr></table></figure>
<p><strong>网络请求</strong>：Retrofit2，不二之选。然后使用Gson作为转换器，okhttp3作为网络请求客户端，再加上网络日志拦截器，简直完美！ 依赖包看下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// Retrofit &amp;&amp; OKHttp &amp;&amp; GSON</span><br><span class="line">compile &apos;com.squareup.retrofit2:retrofit:2.1.0&apos;</span><br><span class="line">compile &apos;com.squareup.retrofit2:converter-gson:2.1.0&apos;</span><br><span class="line">compile &apos;com.squareup.retrofit2:adapter-rxjava:2.1.0&apos;</span><br><span class="line">compile &apos;com.squareup.okhttp3:okhttp:3.4.1&apos;</span><br><span class="line">compile &apos;com.squareup.okhttp3:logging-interceptor:3.4.1&apos;</span><br><span class="line">compile &apos;org.immutables:gson:2.2.12&apos;</span><br></pre></td></tr></table></figure>
<p><strong>异步操作</strong>：RxJava，简洁、链式调用，与Retrofit2无缝结合，然后自己再简单封装一层，妈妈就再也不用担心异步网络请求响应啦：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;io.reactivex.rxjava2:rxjava:2.0.0-RC2&apos;</span><br></pre></td></tr></table></figure>
<p><strong>图片缓存框架</strong>：比较纠结，原来是想使用Android-Universal-Image-Loader，但后来看到已经停止维护了，所以没用它，然后通过别人文章再三<a href="http://stormzhang.com/opensource/2016/06/26/android-open-source-project-recommend1/" target="_blank" rel="noopener">对比</a>，还有<a href="http://jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0327/2650.html" target="_blank" rel="noopener">这里</a>后使用的是：<code>[Glide](https://github.com/bumptech/glide)</code>，相关使用配置可以先看看官方wiki，当然后面我也会介绍对它如何封装使用的，依赖如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 要依赖com.android.support:support-v4哦</span><br><span class="line">compile &apos;com.github.bumptech.glide:glide:3.7.0&apos;</span><br></pre></td></tr></table></figure>
<p><strong>数据绑定</strong>：Butterknife, 我想这个应该没有疑问, 依赖需要多配置，我直接拷贝官网说明过来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//Configure your project-level build.gradle to include the &apos;android-apt&apos; plugin:</span><br><span class="line">buildscript &#123;</span><br><span class="line">  repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">   &#125;</span><br><span class="line">  dependencies &#123;</span><br><span class="line">    classpath &apos;com.neenbedankt.gradle.plugins:android-apt:1.8&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//Then, apply the &apos;android-apt&apos; plugin in your module-level build.gradle and add the Butter Knife dependencies:</span><br><span class="line"></span><br><span class="line">apply plugin: &apos;android-apt&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">  compile &apos;com.jakewharton:butterknife:8.4.0&apos;</span><br><span class="line">  apt &apos;com.jakewharton:butterknife-compiler:8.4.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后加上混淆配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># Glide框架混淆设置</span><br><span class="line">-keep public class * implements com.bumptech.glide.module.GlideModule</span><br><span class="line">-keep public enum com.bumptech.glide.load.resource.bitmap.ImageHeaderParser$** &#123;</span><br><span class="line">  **[] $VALUES;</span><br><span class="line">  public *;</span><br><span class="line">&#125;</span><br><span class="line">#-keepresourcexmlelements manifest/application/meta-data@value=GlideModule</span><br><span class="line"></span><br><span class="line"># Butter Knife 混淆</span><br><span class="line">-keep public class * implements butterknife.Unbinder &#123; public &lt;init&gt;(...); &#125;</span><br><span class="line">-keep class butterknife.*</span><br><span class="line">-keepclasseswithmembernames class * &#123; @butterknife.* &lt;methods&gt;; &#125;</span><br><span class="line">-keepclasseswithmembernames class * &#123; @butterknife.* &lt;fields&gt;; &#125;</span><br><span class="line"></span><br><span class="line"># Retrofit2</span><br><span class="line">-dontnote retrofit2.Platform</span><br><span class="line">-dontnote retrofit2.Platform$IOS$MainThreadExecutor</span><br><span class="line">-dontwarn retrofit2.Platform$Java8</span><br><span class="line">-keepattributes Signature</span><br><span class="line">-keepattributes Exceptions</span><br><span class="line"></span><br><span class="line"># Gson</span><br><span class="line">-keepattributes Signature</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line">-keep class sun.misc.Unsafe &#123; *; &#125;</span><br><span class="line">-keep class com.google.gson.stream.** &#123; *; &#125;</span><br><span class="line">-keep class com.google.gson.examples.android.model.** &#123; *; &#125;</span><br><span class="line"></span><br><span class="line">-dontwarn org.immutables.gson.**</span><br><span class="line">-keep class org.immutables.gson.** &#123; *;&#125;</span><br><span class="line"></span><br><span class="line"># OkHttp</span><br><span class="line">-keepattributes Signature</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line">-keep class okhttp3.** &#123; *; &#125;</span><br><span class="line">-keep interface okhttp3.** &#123; *; &#125;</span><br><span class="line">-dontwarn okhttp3.**</span><br><span class="line">-dontwarn okio.**</span><br><span class="line"></span><br><span class="line"># RxJava</span><br><span class="line">-keep class rx.schedulers.Schedulers &#123;</span><br><span class="line">    public static &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line">-keep class rx.schedulers.ImmediateScheduler &#123;</span><br><span class="line">    public &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line">-keep class rx.schedulers.TestScheduler &#123;</span><br><span class="line">    public &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line">-keep class rx.schedulers.Schedulers &#123;</span><br><span class="line">    public static ** test();</span><br><span class="line">&#125;</span><br><span class="line">-dontwarn rx.internal.util.unsafe.**</span><br><span class="line">-keep class rx.internal.util.unsafe.** &#123; *;&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果打包出现如’can’t find referenced class’类似混淆错误，其实找不到引用的这个类是第三方包里面的，而且很多时候我们只需要打乱自己的代码就行了，第三方包的代码就是否要打乱就不要管了。我们可以使用<br>-dontwarn com.xx.bbb.<strong><br>-keep class com.xx.bbb.</strong> { *;}<br>参数来保持第三方库中的类而不乱，-dontwarn和-keep 结合使用，意思是保持com.xx.bbb.xx这个包里面的所有类和所有方法而不混淆，接着还叫ProGuard不要警告找不到com.xx.bbb.**这个包里面的类的相关引用。</p>
</blockquote>
<p>OK,重要的就是这些了，基本都是使用最新版本，其它的如Logger是否需要看个人需要。</p>
<p>到此，我们的APP暂时完成了一部分的配置了，再次运行打包，应该不会因为依赖了包导致有什么异常。</p>
<p>Goog Luck!!</p>
<p><em>预告，下一篇《看我开发干货集中营App（三）~ Retroft2+RxJava封装使用》将介绍如何将上面依赖的库封装使用哦，满满的都是福利哦。</em></p>
<blockquote>
<p>系列文章：</p>
<ol>
<li><a href="http://www.huchiwei.com/2016/09/03/%E7%9C%8B%E6%88%91%E5%BC%80%E5%8F%91%E5%B9%B2%E8%B4%A7%E9%9B%86%E4%B8%AD%E8%90%A5App%EF%BC%88%E4%B8%80%EF%BC%89-%E5%BC%80%E7%AF%87/" target="_blank" rel="noopener">看我开发干货集中营App（一）~ 开篇</a></li>
<li><a href="http://www.huchiwei.com/2016/09/09/%E7%9C%8B%E6%88%91%E5%BC%80%E5%8F%91%E5%B9%B2%E8%B4%A7%E9%9B%86%E4%B8%AD%E8%90%A5App%EF%BC%88%E4%BA%8C%EF%BC%89-APP%E5%88%9D%E5%A7%8B%E5%8C%96/" target="_blank" rel="noopener">看我开发干货集中营App（二）~ APP初始化</a></li>
</ol>
</blockquote>
<p><em>欢迎关注，转载请注明原文链接</em></p>

      
    </div>
    <footer class="article-footer">
      <div class="article-footer-content">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android开发/">Android开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/干货集中营，看我开发干货集中营/">干货集中营，看我开发干货集中营</a></li></ul>

        <a data-url="http://hcw2175.github.io/2016/09/09/看我开发干货集中营App（二）-APP初始化/" data-id="cjohwyasf0006ip3i9tzgyvlb" class="article-share-link">分享到</a>
        
      </div>
    </footer>
  </div>
  </div>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/09/21/看我开发干货集中营App（三）-Retroft2+RxJava封装使用/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">
        
          看我开发干货集中营App（三）~Retroft2+RxJava封装使用
        
      </div>
    </a>
  
  
    <a href="/2016/09/03/看我开发干货集中营App（一）-开篇/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">看我开发干货集中营App（一） ~ 开篇</div>
    </a>
  
</nav>

  
</article>


</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/14/IOS微信上Vue单页面应用JSSDK签名失败解决方案/">IOS微信上Vue单页面应用JSSDK签名失败解决方案</a>
          </li>
        
          <li>
            <a href="/2018/01/11/解决Vue引入百度地图JSSDK：BMap is undefined 问题/">解决Vue引入百度地图JSSDK：BMap is undefined 问题</a>
          </li>
        
          <li>
            <a href="/2017/10/18/如何推送镜像到官方Docker Hub/">如何推送镜像到官方docker</a>
          </li>
        
          <li>
            <a href="/2017/03/18/阿里云服务器ESC环境（四）-Java、Nginx、Docker安装/">阿里云服务器ESC环境（四） - Java、Nginx、Docker安装</a>
          </li>
        
          <li>
            <a href="/2017/03/04/阿里云服务器ESC环境（三）-FTP配置/">阿里云服务器ESC环境（三） - FTP配置</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android开发/">Android开发</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESC/">ESC</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FTP/">FTP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Glide封装/">Glide封装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Retroft2封装/">Retroft2封装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava封装/">RxJava封装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH配置/">SSH配置</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSFTPD/">VSFTPD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ionic/">ionic</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ionic入门/">ionic入门</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu-server/">ubuntu server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/云服务器/">云服务器</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多SSH-Key/">多SSH Key</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/干货集中营/">干货集中营</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/干货集中营，看我开发干货集中营/">干货集中营，看我开发干货集中营</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信JSSDK/">微信JSSDK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信支付/">微信支付</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信服务号/">微信服务号</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度地图/">百度地图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/看我开发干货集中营/">看我开发干货集中营</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟机ssh/">虚拟机ssh</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云/">阿里云</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阿里云服务器环境/">阿里云服务器环境</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 范TE剑<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/sun11/hexo-theme-paperbox" target="_blank">Paperbox</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about" class="mobile-nav-link">关于</a>
  
  <a href="#search" class="mobile-nav-link st-search-show-outputs">搜索</a>
</nav>

  

<!-- totop start -->
<div id="totop">
	<a title="返回顶部"></a>
</div>
<!-- totop end -->

<!-- swiftype search start -->

<!-- swiftype search end -->



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/lrsjng.jquery-qrcode/0.12.0/jquery.qrcode.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
